        // --- 0. نظام الإشعارات (Toast) (الكود المصحح) ---
        function showToast(message, type = 'success') {
            const container = document.getElementById('toast-container');
            let bgColor, icon;

            if (type === 'success') {
                bgColor = 'bg-green-500';
                icon = 'fas fa-check-circle';
            } else if (type === 'error') {
                bgColor = 'bg-red-500';
                icon = 'fas fa-times-circle';
            } else if (type === 'info') {
                bgColor = 'bg-blue-500';
                icon = 'fas fa-info-circle';
            } else {
                bgColor = 'bg-yellow-500';
                icon = 'fas fa-exclamation-triangle';
            }

            const toast = document.createElement('div');
            toast.className = `p-4 rounded-xl shadow-xl text-white font-bold text-sm flex items-center gap-3 ${bgColor} transition transform translate-x-full duration-300`;
            // ** تم تصحيح هذا السطر: إغلاق وسم <i> بشكل صحيح **
            toast.innerHTML = `<i class="${icon}"></i> <span>${message}</span>`;
            
            container.appendChild(toast);
            
            // دخول التوست (Fade in)
            setTimeout(() => {
                toast.classList.remove('translate-x-full');
            }, 10); 

            // إزالة التوست بعد 4 ثواني
            setTimeout(() => {
                toast.classList.add('translate-x-full');
                toast.addEventListener('transitionend', () => toast.remove());
            }, 4000);
        }
