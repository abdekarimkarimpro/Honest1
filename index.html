... (Ø§Ù„Ø±Ù…Ø² Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰) ...
<body class="bg-gray-50 text-gray-800 pb-10 select-none">

    ... (Ø¨Ø§Ù‚ÙŠ Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„ÙƒÙˆØ¯: Ø²Ø± Ø§Ù„Ø¥ØµÙ„Ø§Ø­ØŒ Ø§Ù„ØªÙˆØ³ØªØŒ Ø§Ù„Ù„ÙˆØ¯Ø±ØŒ Ø´Ø§Ø´Ø§Øª Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©) ...

    <div id="main-app" class="d-none">
        
        <nav class="bg-blue-900 text-white p-4 sticky top-0 z-40 shadow-md">
            <div class="flex justify-between items-center max-w-2xl mx-auto">
                <div>
                    <h1 class="font-bold">Ø³Ø§Øª ÙÙŠÙƒØ³</h1>
                    <span id="user-welcome" class="text-[10px] text-blue-200">...</span>
                </div>
                <button onclick="doLogout()" class="bg-red-500 text-white text-xs px-3 py-1 rounded hover:bg-red-600 transition">Ø®Ø±ÙˆØ¬</button>
            </div>
        </nav>

        <div class="max-w-2xl mx-auto p-4 min-h-screen">
            
            ... (Ù„ÙˆØ­Ø© Ø§Ù„Ø²Ø¨ÙˆÙ† ÙˆÙ„ÙˆØ­Ø© Ø§Ù„ÙÙ†ÙŠ) ...

            <div id="panel-admin" class="d-none">
                <h2 class="text-xl font-bold mb-4">Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
                <div class="bg-white p-4 rounded-xl shadow mb-6 border border-gray-100">
                    <h3 class="font-bold mb-2 text-blue-700">â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h3>
                    <input id="adm-name" placeholder="Ø§Ù„Ø§Ø³Ù…" class="border p-2 w-full rounded mb-2">
                    <input id="adm-price" placeholder="Ø§Ù„Ø³Ø¹Ø± Ù„Ù„Ø²Ø¨ÙˆÙ†" type="number" class="border p-2 w-full rounded mb-2">
                    <input id="adm-comm" placeholder="Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„ÙÙ†ÙŠ" type="number" class="border p-2 w-full rounded mb-3">
                    
                    <label class="block text-sm font-bold text-gray-700 mb-1">ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬ (URL)</label>
                    <input type="file" id="adm-image-file" accept="image/*" class="w-full text-sm text-gray-500 mb-4 border p-2 rounded-lg bg-gray-50">
                    <input id="adm-imgurl" placeholder="Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© (URL) Ù…Ø¨Ø§Ø´Ø±" class="border p-2 w-full rounded mb-3 text-xs" dir="ltr"> 
                    
                    <button onclick="addProd()" class="w-full bg-black text-white py-2 rounded font-bold hover:bg-gray-800 transition">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬</button>
                </div>
                <h3 class="font-bold text-gray-700 mb-3 border-b pb-2" id="admin-prod-header">ğŸ“¦ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª (0)</h3>
                <div id="list-admin" class="space-y-2"></div>

                <h3 class="font-bold text-gray-700 mt-6 mb-3 border-b pb-2">ğŸ› ï¸ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©</h3>
                <div id="list-admin-reqs" class="space-y-2"></div>
            </div>

        </div>
    </div>

    ... (Ø¨Ø§Ù‚ÙŠ Ø£Ø¬Ø²Ø§Ø¡ Ø§Ù„ÙƒÙˆØ¯: Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ØŒ ÙˆØ§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±ÙŠØ¨Øª) ...

    <script>
        ... (Ø¯ÙˆØ§Ù„ showToast, getSafeData, save) ...

        // Ø±Ø§Ø¨Ø· Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±
        const defaultImageUrl = 'https://picsum.photos/80/80?random=';

        let db = {
            users: getSafeData('sf_users_v2', []),
            products: getSafeData('sf_prods_v3', [
                // ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‡ÙŠÙƒÙ„ Ù„ÙŠØ´Ù…Ù„ imgURL
                {id:1, name:'Ø±Ø³ÙŠÙØ± Echolink HD', price:200, comm:40, imgURL: defaultImageUrl + '1', icon:'ğŸ“¡'}, 
                {id:2, name:'Ù„Ø§Ù‚Ø· LNB Ø¹Ø§Ù„ÙŠ Ø§Ù„Ø¬ÙˆØ¯Ø©', price:50, comm:10, imgURL: defaultImageUrl + '2', icon:'ğŸ“¡'},
                {id:3, name:'ØªØ¬Ø¯ÙŠØ¯ Ø§Ø´ØªØ±Ø§Ùƒ IPTV', price:350, comm:70, imgURL: defaultImageUrl + '3', icon:'ğŸ“º'}
            ]),
            requests: getSafeData('sf_reqs_v2', []),
            techLogs: getSafeData('sf_tech_logs_v2', []), 
            current: getSafeData('sf_curr_v2', null)
        };

        function save() {
            localStorage.setItem('sf_users_v2', JSON.stringify(db.users));
            // ØªØºÙŠÙŠØ± Ù…ÙØªØ§Ø­ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„ØªØ¬Ù†Ø¨ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªØ­Ø¯ÙŠØ«
            localStorage.setItem('sf_prods_v3', JSON.stringify(db.products)); 
            localStorage.setItem('sf_reqs_v2', JSON.stringify(db.requests));
            localStorage.setItem('sf_tech_logs_v2', JSON.stringify(db.techLogs));
            localStorage.setItem('sf_curr_v2', JSON.stringify(db.current));
        }

        ... (Ø¨Ø§Ù‚ÙŠ Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ÙˆØ§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª) ...

        // --- 7. Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ---

        ... (Ø¯ÙˆØ§Ù„ loadAdmin, updateAdminRequestsList, deleteRequest, delProd) ...


        // *** Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ÙÙŠ Ø¯Ø§Ù„Ø© Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬: addProd() ***
        async function addProd() {
            const name = document.getElementById('adm-name').value.trim();
            const price = parseInt(document.getElementById('adm-price').value.trim());
            const comm = parseInt(document.getElementById('adm-comm').value.trim());
            const imgURL = document.getElementById('adm-imgurl').value.trim(); 
            const imageFile = document.getElementById('adm-image-file').files[0];

            
            if(!name || isNaN(price) || isNaN(comm) || price <= 0 || comm < 0) {
                return showToast("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª ØµØ­ÙŠØ­Ø© (Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ø³Ø¹Ø±ØŒ Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©).", 'error');
            }

            let finalImageLink = imgURL;

            if (imageFile) {
                // *** Ù‡Ø°Ù‡ Ù‡ÙŠ Ù…Ù†Ø·Ù‚Ø© Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¥Ù„Ù‰ Ø®Ø§Ø¯Ù… Ø­Ù‚ÙŠÙ‚ÙŠ ***
                showLoader();
                showToast("Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù…... (Ù…Ø­Ø§ÙƒØ§Ø©)", 'info');
                
                await new Promise(resolve => setTimeout(resolve, 1500)); // Ù…Ø­Ø§ÙƒØ§Ø© ÙˆÙ‚Øª Ø§Ù„Ø±ÙØ¹ (1.5 Ø«Ø§Ù†ÙŠØ©)

                // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø®Ø§Ø¯Ù… Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ù‡Ù†Ø§ Ø³ÙŠØ±Ø¬Ø¹ Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ.
                // Ø­Ø§Ù„ÙŠØ§Ù‹ØŒ Ù†Ø³ØªØ®Ø¯Ù… FileReader Ù„Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…Ø­Ù„ÙŠØ© ÙƒØ¨Ø¯ÙŠÙ„ Ù…Ø¤Ù‚Øª.
                finalImageLink = await new Promise(resolve => {
                    const reader = new FileReader();
                    reader.onload = (e) => resolve(e.target.result);
                    reader.readAsDataURL(imageFile); // Ù‡Ø°Ø§ ÙŠØ¹Ø·ÙŠ Ø±Ø§Ø¨Ø· Base64 (ÙŠØ¹Ù…Ù„ Ù…Ø­Ù„ÙŠØ§Ù‹ ÙÙ‚Ø·)
                });
                
                hideLoader();
            }

            if (!finalImageLink) {
                 finalImageLink = defaultImageUrl + Date.now(); // Ø±Ø§Ø¨Ø· Ø§ÙØªØ±Ø§Ø¶ÙŠ ÙÙŠ Ø­Ø§Ù„Ø© Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ ØµÙˆØ±Ø© Ù…ÙØ¯Ø®Ù„Ø©
            }
            
            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
            db.products.push({ 
                id: Date.now(), 
                name, 
                price, 
                comm, 
                imgURL: finalImageLink, 
                icon: 'ğŸ“¦' 
            });
            save();
            loadAdmin();

            // Ù…Ø³Ø­ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø¶Ø§ÙØ©
            document.getElementById('adm-name').value = '';
            document.getElementById('adm-price').value = '';
            document.getElementById('adm-comm').value = '';
            document.getElementById('adm-imgurl').value = ''; 
            document.getElementById('adm-image-file').value = ''; 

            showToast("âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­.", 'success');
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
        document.addEventListener('DOMContentLoaded', () => {
             // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ
            if (!db.users.find(u => u.id === 0 && u.role === "admin")) {
                db.users.push({ id: 0, name: "Admin (Demo)", role: "admin", wallet: 99999, phone: '1', pass: '1' }); 
                save();
            }
            loadApp();
        });

    </script>
</body>
</html>
